<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Crear</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="../CSS/crear.css">
    <link rel="stylesheet" href="../CSS/globales.css">
</head>
<body>
<header class="mis-viajes">
    <nav class="navbar navbar-expand-lg navbar-viajes">
        <div class="container-fluid">
            <a class="navbar-brand" href="#">
                <img src="../logo.png" alt="Travy Logo" class="logo-img">
            </a>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item"><a class="nav-link" href="viajes.html">Mis viajes</a></li>
                    <li class="nav-item"><a class="nav-link" href="perfil.html">Perfil</a></li>
                </ul>
            </div>
            <a class="nav-link logout-icon" href="#" id="logout">
                <img src="../logout.png" alt="Cerrar sesión">
            </a>
        </div>
    </nav>
</header>
<!--Este es el contenedor principal que contiene las 5 partes del viaje más el título y el año-->
<main class="container-fluid flex-grow-1">
    <div class="text-center mt-4">
        <h2 id="tituloViaje" class="editable-titulo">Ciudad</h2>
        <input type="text" id="inputTitulo" class="input-titulos d-none" placeholder="Ciudad" />
        <h5 id="fechaViaje" class="editable-fecha">Año</h5>
        <input type="text" id="inputFecha" class="input-titulos d-none" placeholder="Año" />
        <!--  selector de categoría -->
        <div class="categoria-selector">
            <img src="../etiqueta.png" alt="Seleccionar categoría" class="icono-categoria" id="abrirSelectorCategoria">
            <select id="categoriaSelect" class="d-none"></select>
        </div>
    </div>


    <div class="container mt-4">
        <div class="row g-4">
            <!--  El contenedor de la parte de las tarjetas de"Diario" -->
            <div class="col-md-4">
                <div class="tarjeta tarjeta-expandible">
                    <div class="cabecera-tarjeta">
                        <strong>Diario</strong>
                        <img src="../lapiz.png" class="icono-editar" alt="Editar">
                    </div>
                    <div class="vista-previa" id="vistaPreviaDiario">Haz click aquí para contar tu historia</div>
                    <div class="contenido-diario">
                        <textarea class="form-control mt-3" rows="8" placeholder="¿Nos cuentas tu historia?" id="diarioTexto"></textarea>
                    </div>
                </div>
            </div>
            <!-- El contenedor de la parte de "Visual" -->
            <div class="col-md-4">
                <div class="tarjeta text-center position-relative" id="tarjeta-visual">
                    <img src="../lapiz.png" class="icono-editar position-absolute" style="top: 15px; right: 15px;" alt="Editar" id="editarFotos">
                    <input type="file" id="inputFoto" class="d-none" accept="image/*" multiple />
                    <div id="carouselVisual" class="visual-carousel-container">
                        <div id="tarjeta-visual-fondo" class="visual-fondo"></div>
                        <button class="carousel-control-prev" type="button" id="prevFoto">
                            <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                        </button>
                        <button class="carousel-control-next" type="button" id="nextFoto">
                            <span class="carousel-control-next-icon" aria-hidden="true"></span>
                        </button>
                    </div>
                </div>
            </div>
            <!-- El contenedor de la parte de " Mapa" -->
            <div class="col-md-4">
                <div class="tarjeta tarjeta-mapa position-relative" id="mapaTarjeta">
                    <strong>Mapa</strong>
                    <img src="../lapiz.png" class="icono-editar" alt="Editar" id="editarMapa">
                    <input type="file" id="inputMapa" accept="image/*" style="display: none;">
                </div>
            </div>
        </div>
    </div>
<!-- El contenedor de la parte de "Checklist"-->
    <div class="container mt-4 mb-5">
        <div class="row g-4">
            <div class="col-md-6">
                <div class="tarjeta">
                    <div class="cabecera-tarjeta">
                        <strong>Checklist</strong>
                        <img src="../lapiz.png" class="icono-editar" alt="Editar" id="editarChecklist">
                    </div>
                    <ul class="list-unstyled mt-3" id="listaChecklist"></ul>
                    <div class="mt-3" id="formNuevoItem" style="display: none;">
                        <input type="text" id="nuevoItem" class="form-control" placeholder="Ej: Coger gafas de sol">
                    </div>
                </div>
            </div>
            <!-- El contenedor de la parte de "Presupuesto" -->
            <div class="col-md-6">
                <div class="tarjeta">
                    <div class="cabecera-tarjeta">
                        <strong>Presupuesto</strong>
                        <img src="../lapiz.png" class="icono-editar" alt="Editar" id="editarPresupuesto">
                    </div>
                    <ul class="list-unstyled mt-3" id="listaPresupuesto"></ul>
                    <div class="mt-3" id="formNuevoGasto" style="display: none;">
                        <input type="text" id="nuevoGasto" class="form-control" placeholder="Ej: Vuelo 120">
                    </div>
                    <div class="mt-3 fw-bold">Total: <span id="totalPresupuesto">0 €</span></div>
                </div>
            </div>
        </div>
    </div>
</main>
<!-- Este es el contenedor que permite tener lo del visor en la parte "Visual"-->
<div id="visorFotos" class="visor-fotos d-none">
    <div class="visor-contenido">
        <button id="cerrarVisor" class="btn-cerrar" aria-label="Cerrar visor">&times;</button>
        <img id="visorImagen" src="" alt="Foto ampliada">
        <div class="visor-controles">
            <button id="anteriorFoto" aria-label="Anterior">&#8592;</button>
            <button id="siguienteFoto" aria-label="Siguiente">&#8594;</button>
            <button id="eliminarFotoVisor" class="btn btn-outline-danger" title="Eliminar esta foto">Eliminar</button>
        </div>
    </div>
</div>
<footer>
    2025 Travy | Hecho con ❤️ por Natalia Pérez Yaguez
</footer>
<script src="../JS/crear.js"></script>
<script src="../JS/globales.js"></script>
<!-- Aquí se incluye el modal que nos permite crear el visor de la parte "Visual" -->
<div class="modal fade" id="modalGaleria" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered modal-lg">
        <div class="modal-content bg-dark text-white">
            <div class="modal-body p-0 position-relative">
                <button type="button" class="btn-close btn-close-white position-absolute top-0 end-0 m-3" data-bs-dismiss="modal" aria-label="Close"></button>
                <img id="modalFoto" src="" class="w-100" style="max-height: 80vh; object-fit: contain;">
                <button id="fotoAnterior" class="btn position-absolute top-50 start-0 translate-middle-y text-white fs-2">&#8249;</button>
                <button id="fotoSiguiente" class="btn position-absolute top-50 end-0 translate-middle-y text-white fs-2">&#8250;</button>
            </div>
        </div>
    </div>
</div>
</body>
</html>
